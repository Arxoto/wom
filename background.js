function setWinInfo(){chrome.system.display.getInfo(displayInfo=>{displayInfo.forEach(info=>{if(!info.isPrimary){return}chrome.storage.local.set({mainInfo:{workArea:{height:info.workArea.height,width:info.workArea.width},win:{heightInit:Math.floor(info.workArea.height*.7),width:Math.floor(info.workArea.width*.5),top:Math.floor(info.workArea.height*.15),left:Math.floor(info.workArea.width*.25)}}})})})}chrome.runtime.onMessage.addListener((message,sender,sendResponse)=>{switch(message.name){case"setWinInfo":setWinInfo();break;default:break}});function createMain(){chrome.storage.local.get("mainInfo",result=>{let mainInfo=result.mainInfo;if(!mainInfo){return setWinInfo()}chrome.windows.create({focused:true,type:"popup",height:mainInfo.win.heightInit,width:mainInfo.win.width,top:mainInfo.win.top,left:mainInfo.win.left,url:"./main/main.html"},window=>{chrome.storage.local.set({mainWinId:window.id})})})}function showHdieMain(){chrome.storage.local.get("mainWinId",result=>{if(!result.mainWinId){return createMain()}chrome.windows.get(result.mainWinId,window=>{if(!window){return createMain()}chrome.windows.remove(result.mainWinId)})})}chrome.commands.onCommand.addListener(command=>{switch(command){case"main":showHdieMain();break;default:break}});console.log("load successful");